<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	xmlns:mj="http://mojarra.dev.java.net/mojarra_ext"
	template="/index.xhtml">

	<ui:define name="menu-vc-esta">
		<table width="100%" border="0" align="left" cellpadding="0"
			style="height: 29px; background-image: url(/pais/img/barra_linha.png)"
			cellspacing="0">
			<tr>
				<td align="right" scope="col" width="65"><h:outputLabel
					value="VOCÊ ESTA: " styleClass="TEXTO_11" /></td>
				<td><p:breadCrumb
					style="height: 19px; background: transparent; border: hidden">
					<p:menuitem value="home" url="/principal.mir" />
					<p:menuitem value="CADASTRO" />
					<p:menuitem value="CADASTRO DE DISCÍPULO"
						action="#{discipuloBean.prepararDiscipulo}" ajax="false" />
				</p:breadCrumb></td>
			</tr>
		</table>
	</ui:define>

	<ui:define name="conteudo">
		<br />
		<br />
		<h:form id="form1" prependId="false">
			<p:growl id="msg" showDetail="true" showSummary="false" life="5000" />

			<p:focus />
			<p:tabView orientation="top">
				<p:tab id="tabDadosPessoais" title="Dados Pessoais">

					<h:panelGrid columns="2" id="pnlGrid">

						<h:panelGrid columns="2" columnClasses="coluna1, coluna2">

							<h:outputLabel value="Nome:" styleClass="formulariosObrigatorio"
								for="nomeTxt" />

							<h:inputText styleClass="formularios2" maxlength="60" size="40"
								tabindex="1" required="true" autocomplete="off" id="nomeTxt"
								value="#{discipuloBean.discipulos.disnome}"
								requiredMessage="Nome é obrigatório">
							</h:inputText>

							<h:outputLabel value="Nome do pai:" styleClass="Texto_cpf_login"
								for="paiTxt" />
							<h:inputText styleClass="formularios2" maxlength="60" size="40"
								value="#{discipuloBean.discipulos.dispai}" required="false"
								id="paiTxt" tabindex="2">
							</h:inputText>

							<h:outputLabel value="Nome da mãe:" styleClass="Texto_cpf_login"
								for="maeTxt" />

							<h:inputText styleClass="formularios2" maxlength="60" size="40"
								tabindex="3" id="maeTxt"
								value="#{discipuloBean.discipulos.dismae}"
								requiredMessage="Nome da mãe é obrigatório">
							</h:inputText>

							<h:outputLabel value="Data de nascimento:"
								styleClass="formulariosObrigatorio" for="dtnasc" />
							<p:inputMask mask="99/99/9999" id="dtnasc"
								value="#{discipuloBean.discipulos.disdatanascimento}" size="15"
								styleClass="formularios2" required="true" tabindex="4"
								requiredMessage="Data de Nascimento é obrigatório">
								<f:convertDateTime type="date" locale="pt_BR" />
							</p:inputMask>


							<h:outputLabel value="Estado civil:"
								styleClass="formulariosObrigatorio" for="estcivil" />
							<h:selectOneMenu id="estcivil" tabindex="5"
								requiredMessage="Estado civil é obrigatório"
								value="#{discipuloBean.estadocivil.estCod}"
								styleClass="formularios" required="true">
								<f:selectItems value="#{estadoCivilBean.estCivilCombo}" />
								<f:ajax render="pnlGrid" process="estcivil" event="change" listener="#{discipuloBean.isCasado}" />
							</h:selectOneMenu>

							<h:outputLabel value="Cônjuge cadastrado no PAIS:"
								styleClass="Texto_cpf_login" />
							<h:selectBooleanCheckbox id="conjugecad" value="#{discipuloBean.conjugeCad}" disabled="#{discipuloBean.editar}"
								required="true">
								<f:ajax render="pnlGrid" process="@this" event="change"
									listener="#{discipuloBean.isCasadoCad}" />
							</h:selectBooleanCheckbox>

							<h:outputLabel value="Nome do cônjuge:"
								styleClass="Texto_cpf_login" />

							<p:autoComplete value="#{discipuloBean.conjugePesq}" rendered="#{discipuloBean.conjugeCad==true}"
								requiredMessage="Nome do cônjuge é obrigatório" readonly="#{discipuloBean.conjugeCadEdit}"
								styleClass="formularios2" maxlength="60" size="40" var="conjuge" minQueryLength="3" 
								completeMethod="#{discipuloBean.completeDiscipulos}" onSelectUpdate="dlg"
								converter="discipulosConverter" itemLabel="#{conjuge.disnome}"
								itemValue="#{conjuge}" forceSelection="true" required="true" onchange="dlg1.show();"
								id="conjugeCadTxt" selectListener="#{discipuloBean.handleSelect}"/>	
													
 							

							<h:inputText readonly="#{discipuloBean.conjugeCadEdit}"
								value="#{discipuloBean.discipulos.disconjuge}" rendered="#{discipuloBean.conjugeCad==false}"
								requiredMessage="Nome do cônjuge é obrigatório" tabindex="6" 
								styleClass="formularios2" maxlength="60" size="40"
								required="true" id="conjugeTxt" />

							<h:outputLabel value="Formação Acadêmica:"
								styleClass="formulariosObrigatorio" for="formacademica" />
							<h:selectOneMenu id="formacademica"
								value="#{discipuloBean.formacaoacademica.forAcCod}"
								requiredMessage="Formação Acadêmica é obrigatória" tabindex="7"
								styleClass="formularios" required="true">
								<f:selectItems
									value="#{formacaoAcademicaBean.formacaoAcademicaCombo}" />
							</h:selectOneMenu>
						</h:panelGrid>

						<h:form prependId="false">
						<p:panel id="pnlFotos" style="background: transparent;">
							<center style="width: 300px;">
							<p:graphicImage id="foto" rendered="#{discipuloBean.fotoEdit == true}"
								value="#{discipuloBean.imagem}" width="120" height="116"
								cache="false" />
								<p:graphicImage id="fotosalva" rendered="#{discipuloBean.fotoEdit == false}" 
								value="#{discipuloBean.discipulos.disfoto}" width="120" height="116"
								cache="false" /> <br />

							<p:fileUpload sizeLimit="1048576" image="/img/but_anexar_foto.png"
								width="118" customUI="true" auto="true" widgetVar="uploader"
								fileUploadListener="#{discipuloBean.handleFileUpload}"
								allowTypes="*.jpg;*.png;*.gif;" description="Imagens"
								id="uploader" update="pnlFotos" /> <h:outputText
								value="Arquivo selecionado: " styleClass="formulariosObrigatorio" /> <h:outputText
								id="idarquivo" value="#{discipuloBean.nomeArquivoSelecionado}"
								styleClass="Texto_cpf_login" /></center>
						</p:panel>
						</h:form>

					</h:panelGrid>
				</p:tab>
			</p:tabView>
			<br />


			<p:tabView id="tabView" activeIndex="3" effect="opacity"
				contentTransition="true">

				<p:tab id="tbdocumentacao" title="Documentação" style="width: 400px">

					<h:panelGrid columns="2" columnClasses="coluna1, coluna2">

						<h:outputLabel value="RG:" styleClass="Texto_cpf_login" for="rg" />
						<h:inputText id="rg" styleClass="formularios2"
							value="#{discipuloBean.discipulos.disRg}" tabindex="8" />


						<h:outputLabel value=" CPF:" styleClass="formulariosObrigatorio"
							for="cpfMask" />
						<p:inputMask id="cpfMask" mask="999.999.999-99" size="15"
							tabindex="9" value="#{discipuloBean.discipulos.disCpf}"
							maxlength="14" styleClass="formularios2" required="true"
							requiredMessage="CPF é obrigatório">
						</p:inputMask>

						<h:outputLabel value="Título Eleitor:"
							styleClass="Texto_cpf_login" for="TitEleitor1" />
						<h:inputText rendered="true" id="TitEleitor1" maxlength="12"
							value="#{discipuloBean.discipulos.disTitEleitor}" tabindex="10"
							styleClass="formularios2">
						</h:inputText>

					</h:panelGrid>
				</p:tab>

				<p:tab id="tbendereco" title="Endereço">


					<h:panelGrid columns="4" id="pnlEndereco"
						columnClasses="coluna1, coluna2, coluna1, coluna2">
						<h:outputLabel value="CEP:" styleClass="formulariosObrigatorio"
							for="cep" />

						<h:inputText id="cep" size="20" tabindex="11"
							requiredMessage="CEP é obrigatório"
							value="#{discipuloBean.logradouro.cep}" maxlength="8"
							styleClass="formularios2" required="true">
							<p:watermark value="Somente Números" for="cep" />
							<f:ajax render="tipo end cidade bairro estado num complemento"
								execute="@this" event="change"
								listener="#{discipuloBean.buscarCEP}" />
						</h:inputText>
						<h:outputText />
						<h:outputLink
							value="http://www.buscacep.correios.com.br/servicos/dnec/menuAction.do?Metodo=menuEndereco"
							target="_blank">
							<h:graphicImage value="/img/busca_cep.jpg" />
						</h:outputLink>

						<h:outputLabel value="Tipo:" styleClass="formulariosObrigatorio"
							for="tipo" />
						<h:inputText id="tipo" styleClass="formularios2" required="true"
							value="#{discipuloBean.logradouro.logTipoLogradouro}" size="20"
							readonly="true" />
						<h:outputLabel value="Endereço:"
							styleClass="formulariosObrigatorio" for="end" />
						<h:inputText id="end" value="#{discipuloBean.logradouro.logNo}"
							required="true" styleClass="formularios2" size="30"
							readonly="true" />
						<h:outputLabel value="Número:" styleClass="Texto_cpf_login"
							for="num" />
						<p:inputMask mask="?9999" id="num" maxlength="4" tabindex="12"
							size="4" styleClass="formularios2"
							value="#{discipuloBean.discipulos.disEndNumero}">
						</p:inputMask>
						<h:outputLabel value="Complemento:" styleClass="Texto_cpf_login"
							for="complemento" />
						<h:inputText id="complemento" maxlength="10" size="30"
							styleClass="formularios2" tabindex="13"
							value="#{discipuloBean.discipulos.disEndComplemento}" />
						<h:outputLabel value="Bairro:" styleClass="formulariosObrigatorio"
							for="bairro" />
						<h:inputText id="bairro" styleClass="formularios2" required="true"
							value="#{discipuloBean.logradouro.bairro.baiNo}" readonly="true" />
						<h:outputLabel value="Cidade:" styleClass="formulariosObrigatorio"
							for="cidade" />
						<h:inputText id="cidade" styleClass="formularios2" required="true"
							value="#{discipuloBean.logradouro.bairro.localidade.locNo}"
							readonly="true" />
						<h:outputLabel value="Estado:" styleClass="formulariosObrigatorio"
							for="estado" />
						<h:inputText id="estado" styleClass="formularios2" required="true"
							value="#{discipuloBean.logradouro.bairro.localidade.estado.ufeNo}"
							readonly="true" />
					</h:panelGrid>


				</p:tab>

				<p:tab id="tbcontatos" title="Contatos">

					<h:panelGrid columns="2" columnClasses="coluna1, coluna2">


						<h:outputLabel value="Email:" styleClass="formulariosObrigatorio"
							for="emailTxt" />
						<h:inputText id="emailTxt" size="40" maxlength="60" tabindex="14"
							requiredMessage="Email é obrigatório" autocomplete="off"
							value="#{discipuloBean.discipulos.disemail}"
							styleClass="formularios2" required="true">
							<mj:regexValidator pattern=".+@.+\.[a-z]+" />
						</h:inputText>

						<h:outputLabel value="Tel. Fixo:" styleClass="Texto_cpf_login"
							for="telTxt" />
						<p:inputMask mask="(99) 9999-9999" id="telTxt" tabindex="15"
							value="#{discipuloBean.discipulos.disTelFixo}" autocomplete="off"
							styleClass="formularios2" />

						<h:outputLabel value="Tel. Celular:" styleClass="Texto_cpf_login"
							for="telTxt2" />
						<p:inputMask mask="(99) 9999-9999" id="telTxt2" tabindex="16"
							value="#{discipuloBean.discipulos.disTelCelular}"
							autocomplete="off" styleClass="formularios2" />
						<h:outputLabel value="Tel. Comercial:"
							styleClass="Texto_cpf_login" for="telTxt3" />
						<p:inputMask mask="(99) 9999-9999" id="telTxt3" tabindex="17"
							value="#{discipuloBean.discipulos.disTelComercial}"
							autocomplete="off" styleClass="formularios2" />
					</h:panelGrid>

				</p:tab>
				<p:tab id="tbMinisteriais" title="Dados Ministeriais">
					<p:outputPanel id="panel">
						<h:panelGrid columns="2" columnClasses="coluna1, coluna2">
							<h:outputLabel value="Função Eclesiástica:"
								styleClass="formulariosObrigatorio" for="funcaoeclesiastica" />
							<h:selectOneMenu id="funcaoeclesiastica"
								value="#{discipuloBean.funcaoeclesiasticas.funCod}"
								requiredMessage="Função Eclesiástica é obrigatória"
								tabindex="18" styleClass="formularios" required="true">
								<f:selectItems var="funcEclesiastica"
									itemLabel="#{funcEclesiastica.funDescricao}"
									itemValue="#{funcEclesiastica.funCod}"
									value="#{discipuloBean.listaFuncaoEclesiasticas}" />
								<f:ajax render="senha" process="funcaoeclesiastica"
									event="change" listener="#{discipuloBean.isDiscipulo}" />
							</h:selectOneMenu>

							<h:outputLabel value="Senha de Acesso:"
								styleClass="formulariosObrigatorio" for="senha" />
							<h:inputSecret id="senha" size="10" styleClass="formularios2"
								required="true" tabindex="19" redisplay="true"
								value="#{discipuloBean.discipulos.disSenha}"
								readonly="#{discipuloBean.editarSenha}"
								requiredMessage="Senha é obrigatória" />
							<h:outputLabel value="Discipulador:"
								styleClass="formulariosObrigatorio" for="discipulador" />
							<h:inputText id="discipulador" size="30"
								styleClass="formularios2" required="true"
								value="#{loginBean.discipuloSessao.discipulos.disnome}"
								readonly="true" requiredMessage="Discipulador é obrigatório" />

							<h:outputLabel value="M12?:" styleClass="formulariosObrigatorio"
								for="m12" />
							<h:selectOneRadio id="m12" styleClass="Texto_cpf_login"
								value="#{discipuloBean.discipulos.dism12}" tabindex="21"
								requiredMessage="M12 é obrigatório">
								<f:selectItem itemLabel="Sim" itemValue="s" />
								<f:selectItem itemLabel="Não" itemValue="n" />
								<f:ajax event="change" listener="#{discipuloBean.isM12}"
									execute="m12" render="panel" />
							</h:selectOneRadio>

							<h:outputLabel value="Equipe:"
								styleClass="formulariosObrigatorio" id="lblgeracao"
								rendered="#{discipuloBean.editarM12}" for="geracao" />
							<h:selectOneMenu id="geracao"
								rendered="#{discipuloBean.editarM12}"
								value="#{discipuloBean.geracoes.gerCod}"
								requiredMessage="Geração é obrigatória" styleClass="formularios"
								required="true" tabindex="20">
								<f:selectItems value="#{geracaoBean.geracaoCombo}" />
							</h:selectOneMenu>


						</h:panelGrid>
					</p:outputPanel>
				</p:tab>
				<p:tab id="tbformacaoeclesiastica" title="Formação Eclesiástica">
					<center><h:panelGrid columns="2"
						columnClasses="coluna1, coluna2">
						<center><p:pickList
							value="#{discipuloBean.listaFormacaoEclesiasticas}"
							styleClass="formulariosObrigatorio" var="formacaoEclesiasticas"
							converter="formacaoEclesiasticaConverter"
							itemLabel="#{formacaoEclesiasticas.forEcDescricao}"
							itemValue="#{formacaoEclesiasticas}" tabindex="23"
							addAllLabel="Adicionar Todos" addLabel="Adicionar"
							removeAllLabel="Remover Todos" removeLabel="Remover"
							effect="fade">

							<f:facet name="sourceCaption">Formação Eclesiásticas</f:facet>
							<f:facet name="targetCaption">Possui</f:facet>

						</p:pickList></center>
					</h:panelGrid></center>
				</p:tab>

				<p:tab id="tbencontros" title="Tipos de Encontro">
					<center><h:panelGrid columns="2"
						columnClasses="coluna1, coluna2">

						<center><p:pickList
							value="#{discipuloBean.listaEncontros}" var="encontros"
							converter="encontrosConverter"
							styleClass="formulariosObrigatorio"
							itemLabel="#{encontros.encDescricao}" tabindex="24"
							itemValue="#{encontros}" addAllLabel="Adicionar Todos"
							addLabel="Adicionar" removeAllLabel="Remover Todos"
							removeLabel="Remover" effect="fade">

							<f:facet name="sourceCaption">Encontros</f:facet>
							<f:facet name="targetCaption">Encontros que já participou</f:facet>

						</p:pickList>
					</center>
					</h:panelGrid></center>
				</p:tab>
			</p:tabView>

			<br />

			<h:commandButton value="Editar..." styleClass="formularios"
				tabindex="25" actionListener="#{discipuloBean.editar}"></h:commandButton>
	
	<p:dialog  closeOnEscape="true" position="center" resizable="false" widgetVar="dlg1" header="Dados do discípulo">
		<h:panelGrid id="dlg" columns="2" columnClasses="coluna1, coluna2">
			<p:graphicImage id="dlgFoto" value="#{discipuloBean.conjugePesq.disfoto}" width="120" height="116" cache="false" />
			
			<h:outputLabel id="dlgNome" value="#{discipuloBean.conjugePesq.disnome}" styleClass="formularios2"/>
		
			<h:outputLabel value="CPF:" styleClass="Texto_cpf_login"/>
			<h:outputLabel id="dlgCPF" value="#{discipuloBean.conjugePesq.disCpf}" styleClass="formularios2" />	
		</h:panelGrid>
	</p:dialog>	
				
		</h:form>
		
		
	</ui:define>


</ui:composition>